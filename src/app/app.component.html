<!-- Navigation bar -->
<mat-toolbar color="primary" style="position: fixed; top: 0; height: 80px">
  <span><h2>Steam Monkey</h2></span>
  <span class="spacer"></span>
  <form (submit)="$event.preventDefault()" style="margin-top: 20px">
    <mat-form-field>
      <mat-label>Game name</mat-label>
      <input matInput type="search" [formControl]="searchControl" [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete" panelWidth="500px" [displayWith]="extractGameName" (optionSelected)="onGameSelection($event.option)">
        <mat-option *ngFor="let game of filteredData | async" [value]="game">
          <span>{{game.name}}</span>
          <span class="spacer"></span>
          <img src="{{game.header_image}}"
            alt="Game image" style="height: 40px">
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form>
  <img src="assets/icon.png" alt="Steam icon" style="height: 30px; width: 30px; margin-left: 30px;">
</mat-toolbar>

<!-- Clearance below nav bar -->
<div style="height: 90px"></div>

<!-- ========== SINGLE GAME INFO ========== -->
<!-- Header -->
<mat-card class="game-card">
  <mat-card-header>
    <mat-card-title #gameName><h2>{{currentGame.name}}</h2></mat-card-title>
    <img mat-card-xl-image [attr.src]="currentGame.header_image" class="game-card-image" alt="Cover photo"> 
  </mat-card-header>

  <mat-card-content>
    <b>Genres</b>
    <mat-list #genreList>
      <mat-list-item *ngFor="let genre of currentGame.genre">{{genre}}</mat-list-item>
    </mat-list>
    <b>Categories</b>
    <mat-list #categoryList>
      <mat-list-item *ngFor="let category of currentGame.categories">{{category}}</mat-list-item>
    </mat-list>
    <b>Tags</b>
    <mat-list #tagList>
      <mat-list-item *ngFor="let tag of currentGame.tags | keyvalue">{{tag.key}}: {{tag.value}}</mat-list-item>
    </mat-list>
    <b>Languages</b>
    <mat-list #languageList>
      <mat-list-item *ngFor="let language of currentGame.languages.split(', ')">{{language}}</mat-list-item>
    </mat-list>
    <b>Platforms</b>
    <mat-list>
      <mat-list-item>
        <b>Windows: </b>
        <mat-icon #winSupport>{{supportToIconName(currentGame.platforms.windows)}}</mat-icon>
      </mat-list-item>
      <mat-list-item>
        <b>Linux: </b>
        <mat-icon #linuxSupport>{{supportToIconName(currentGame.platforms.windows)}}</mat-icon>
      </mat-list-item>
      <mat-list-item>
        <b>Mac: </b>
        <mat-icon #macSupport>{{supportToIconName(currentGame.platforms.windows)}}</mat-icon>
      </mat-list-item>
    </mat-list>
  </mat-card-content>
</mat-card>

<!-- First row -->
<div class="two-col-container">
  <app-radar instanceId="categoricalDataRadar" class="first-col"></app-radar>

  <app-box instanceId="categoricalDataBox" class="second-col"></app-box>
</div>

<!-- Second row -->
<div class="two-col-container">
  <!-- TODO: Replace testing dummy with check of existence of Metacritic data once processing is complete -->
  <app-bar instanceId="scoresBar" class="first-col" *ngIf="hasMetaDummy; else steamReviewsPie"></app-bar> 
  <ng-template #steamReviewsPie>
    <app-pie instanceId="steamReviewsPie" class="first-col"></app-pie>
  </ng-template>

  <app-pie instanceId="gameCompletionPie" class="second-col"></app-pie>
</div>

<!-- Third row -->
<div>
  <app-line instanceId="likesOverTimeLine"></app-line>
</div>

<!-- Fourth row -->
<div>
  <app-line instanceId="ccuOverTimeLine"></app-line>
</div>


<!-- PLACEHOLDER; TODO: Remove -->
<div style="height: 2000px; width: 1000px; margin-top: 100px; margin-left: auto; margin-right: auto; z-index: -1;">
  <h3>Hello world!</h3>
  <button mat-raised-button color="accent" (click)="showPie()">Show pie</button>
  <div #pieContainer></div>
</div>
